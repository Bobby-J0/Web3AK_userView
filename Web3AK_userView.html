<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Web3AK ì‹¤ì‹œê°„ ìœ ì €</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://unpkg.com/gojs@2.3.11/release/go.js"></script>
    <style>
        /* [1] ë·°ì–´ ë° ê¸°ë³¸ ë ˆì´ì•„ì›ƒ */
        #orgChartDiv {
            width: 100%;
            height: 85vh; /* ë·°ì–´ ë†’ì´ ì„¤ì • */
            background-color: #FAFAFA;
            border: 1px solid #ccc;
        }
        body { 
            font-family: Arial, sans-serif; 
            text-align: center;
            margin: 0; 
            padding: 0;
            position: relative; 
        }
        
        /* [2] ë…¸ë“œ ìƒì„¸ ì •ë³´ (ìš°ì¸¡ ìƒë‹¨) */
        .node-info { 
            position: absolute; 
            top: 95px; /* ìœ„ì¹˜ ìœ ì§€ */
            right: 40px; 
            max-width: 380px; 
            text-align: left; 
            
            padding: 15px; 
            border: 1px solid #ddd; 
            background-color: rgba(255, 255, 255, 0.95); 
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            z-index: 100; 
        }
        
        /* [3] ê¸°ëŠ¥ ì•ˆë‚´ ë°•ìŠ¤ (ì¢Œì¸¡ ìƒë‹¨) */
        .feature-info {
            position: absolute; 
            top: 95px; /* ìœ„ì¹˜ ìœ ì§€ */
            left: 10px; /* ìœ„ì¹˜ ìœ ì§€ */
            max-width: 380px; 
            text-align: left; 
            
            padding: 15px; 
            border: 1px solid #ccc; 
            background-color: rgba(255, 255, 255, 0.95);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            z-index: 100;
            
            font-size: 13px;
        }
        .feature-info ul {
            list-style-type: none;
            padding-left: 0;
            margin-bottom: 0;
        }
        .feature-info li {
            margin-bottom: 5px;
        }
        
        /* [4] ê²€ìƒ‰ UI ìŠ¤íƒ€ì¼ */
        .search-container {
            margin-top: 15px;
            margin-bottom: 15px;
            text-align: center;
        }
        #searchInput {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 300px; /* ê²€ìƒ‰ì°½ ë„ˆë¹„ ìœ ì§€ */
        }
        .search-container button {
            padding: 8px 15px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 5px; /* ë²„íŠ¼ ê°„ê²© ì¶”ê°€ */
        }
        #clearSearchButton {
            background-color: #6c757d; /* Clear ë²„íŠ¼ ìƒ‰ìƒ êµ¬ë¶„ */
        }
        .search-container button:hover {
            background-color: #0056b3;
        }
        #clearSearchButton:hover {
            background-color: #5a6268;
        }
        
    </style>
</head>
<body>
    <h2>Web3AK ì¡°ì§ë„</h2>
    
    <div class="search-container">
        <input type="text" id="searchInput" placeholder="ì´ë¦„, ì—°ë½ì²˜, ì§€ê°‘ì£¼ì†Œ (ë¶€ë¶„ ì¼ì¹˜ ê²€ìƒ‰)">
        <button id="clearSearchButton">Clear</button>
        <button onclick="highlightNodes()">ê²€ìƒ‰</button>
    </div>

    <div class="feature-info">
        <h3>ğŸš€ ì›¹ ì•± í•µì‹¬ ê¸°ëŠ¥</h3>
        <ul>
            <li>**ë°ì´í„° ì—°ë™:** Google Sheets ë°ì´í„° ì‹¤ì‹œê°„ ìë™ ë°˜ì˜</li>
            <li>**ë…¸ë“œ ìƒì„¸:** í´ë¦­ ì‹œ ìš°ì¸¡ ìƒë‹¨ì— ì§€ê°‘ ì£¼ì†Œ ë“± ìƒì„¸ ì •ë³´ í‘œì‹œ</li>
            <li>**ê²€ìƒ‰:** ì´ë¦„/ì—°ë½ì²˜/ì¼ë¶€ ì§€ê°‘ì£¼ì†Œë¡œ ì…ë ¥ ì¦‰ì‹œ ë…¸ë“œ ìë™ ê°•ì¡° (ë¶€ë¶„ ì¼ì¹˜)</li>
            <li>**ê²€ìƒ‰ ì´ˆê¸°í™”:** ESC í‚¤ ë˜ëŠ” 'Clear' ë²„íŠ¼ìœ¼ë¡œ ê²€ìƒ‰ ì´ˆê¸°í™” ê°€ëŠ¥</li>
            <li>**ê¸°ë³¸ ì¡°ì‘:** ì¡°ì§ë„ ì´ë™ ë° í™•ëŒ€/ì¶•ì†Œ (í‚¤ë³´ë“œ + ë§ˆìš°ìŠ¤ íœ )</li>
        </ul>
    </div>

    <div class="node-info" id="selectedNodeInfo">ë…¸ë“œë¥¼ ì„ íƒí•˜ë©´ ìƒì„¸ ì •ë³´ê°€ í‘œì‹œë©ë‹ˆë‹¤.</div>

    <div id="orgChartDiv"></div>

    <script>
        // Google Apps Script ì›¹ ì•± URL (ë°ì´í„° API ì—”ë“œí¬ì¸íŠ¸)
        const API_URL = "https://script.google.com/macros/s/AKfycbyiqN24ws77h9-DgeN3LkuEiK39azcSZXsS6_L8S_UvvcwUJmY0b-2wLK_xzKtmmNqRlQ/exec"; 
        // GoJS ê°ì²´ ìƒì„±ì„ ìœ„í•œ ì•½ì‹ ì •ì˜
        const $ = go.GraphObject.make; 
        
        let myDiagram = null; 
        
        function init() {
            // ë‹¤ì´ì–´ê·¸ë¨ ì´ˆê¸°í™”
            myDiagram =
                $(go.Diagram, "orgChartDiv", 
                {
                    initialAutoScale: go.Diagram.Uniform, // ì´ˆê¸° ë¡œë“œ ì‹œ ëª¨ë“  ë…¸ë“œê°€ ë³´ì´ë„ë¡ ìë™ ìŠ¤ì¼€ì¼ ì¡°ì •
                    layout: $(go.TreeLayout, // ì¡°ì§ë„(Tree) ë ˆì´ì•„ì›ƒ ì„¤ì •
                                { angle: 90, nodeSpacing: 10, layerSpacing: 50 }),
                    "undoManager.isEnabled": true, // ì‹¤í–‰ ì·¨ì†Œ ê¸°ëŠ¥ í™œì„±í™”
                    "click": function(e) {
                        // ë¹ˆ ê³µê°„ í´ë¦­ ì‹œ ìƒì„¸ ì •ë³´ ì´ˆê¸°í™”
                        document.getElementById("selectedNodeInfo").innerHTML = "ë…¸ë“œë¥¼ ì„ íƒí•˜ë©´ ìƒì„¸ ì •ë³´ê°€ í‘œì‹œë©ë‹ˆë‹¤.";
                    }
                });

        // ë…¸ë“œ í…œí”Œë¦¿ ì •ì˜: ê° ìœ ì € ë°•ìŠ¤ì˜ ë””ìì¸ê³¼ ë™ì‘ ì„¤ì •
        myDiagram.nodeTemplate = 
            $(go.Node, "Auto",
                // ë…¸ë“œê°€ ì„ íƒë˜ì—ˆì„ ë•Œ í‘œì‹œë˜ëŠ” í…Œë‘ë¦¬ (ê¸°ë³¸ íŒŒë€ìƒ‰)
                { selectionAdornmentTemplate: nodeSelectionAdornmentTemplate },
                // ë…¸ë“œ ìœ„ì¹˜ ë°”ì¸ë”©
                new go.Binding("location", "loc", go.Point.parse).makeTwoWay(go.Point.stringify),
                {
                    // ë…¸ë“œ í´ë¦­ ì´ë²¤íŠ¸
                    click: function(e, node) {
                        showNodeDetails(node.data);
                    }
                },
                // ë…¸ë“œ ë°°ê²½ ë„í˜• (RoundedRectangle)
                $(go.Shape, "RoundedRectangle",
                    { name: "shapeElement", strokeWidth: 2, stroke: "#224488" },
                    
                    // ì‹¤ì‹œê°„ ê°•ì¡° ìƒ‰ìƒ ë°”ì¸ë”©ì´ ìµœìš°ì„  ì ìš©: isHighlightedì— ë”°ë¼ ë…¸ë“œ ë°°ê²½ìƒ‰ ë³€ê²½
                    new go.Binding("fill", "isHighlighted", function(h, shape) {
                        if (h) return "#A9A9A9"; // ê²€ìƒ‰ ì¼ì¹˜ ì‹œ ì¼ë°˜ íšŒìƒ‰ìœ¼ë¡œ ê°•ì¡° (ìµœì¢… ìˆ˜ì •)
                        // isHighlightedê°€ falseì¼ ê²½ìš°, isRoot ì†ì„±ì„ ì‚¬ìš©í•˜ì—¬ ì›ë˜ì˜ ìƒ‰ìƒìœ¼ë¡œ ë³µêµ¬
                        return shape.part.data.isRoot ? "#ff9933" : "#66bb6a"; 
                    })
                ),
                
                // ë…¸ë“œ í…ìŠ¤íŠ¸ (ìœ ì € ì •ë³´)
                $(go.TextBlock, "Default Info",
                    { 
                        margin: 8, 
                        font: "bold 14pt Arial, sans-serif",
                        stroke: "white", 
                        textAlign: "center" 
                    },
                    // ë°ì´í„° ë°”ì¸ë”©: í‘œì‹œí•  í…ìŠ¤íŠ¸ êµ¬ì„±
                    new go.Binding("text", "", function(data) {
                        const name = data.ìœ ì €_ì´ë¦„ || 'ì´ë¦„ ì—†ìŒ';
                        const userId = data.ìœ ì €_ID;
                        let totalCountLine = "";
                        if (data.ì´_í•˜ìœ„_ìˆ˜ && data.ì´_í•˜ìœ„_ìˆ˜ > 0) {
                            totalCountLine = `\n(ì´ ${data.ì´_í•˜ìœ„_ìˆ˜}ëª…)`;
                        }
                        return `${name}\n${userId}${totalCountLine}`; 
                    })
                )
            );

            // ë§í¬ í…œí”Œë¦¿ ì •ì˜: ë…¸ë“œë“¤ì„ ì‡ëŠ” ì„ ì˜ ë””ìì¸ ì„¤ì •
            myDiagram.linkTemplate = 
                $(go.Link, go.Link.Orthogonal, { corner: 5 },
                    $(go.Shape, { strokeWidth: 1.5, stroke: "#555" }));
            
            // APIì—ì„œ ë°ì´í„° ë¡œë“œ ë° ì°¨íŠ¸ êµ¬ì„± ì‹œì‘
            fetchDataAndBuildChart(myDiagram);
            
            // --- [JS ë¡œì§ í†µí•© ë° ì¶”ê°€: ê²€ìƒ‰ ê¸°ëŠ¥] ---
            const searchInput = document.getElementById('searchInput');
            const clearButton = document.getElementById('clearSearchButton');

            // ê²€ìƒ‰ì°½ì— keyup ì´ë²¤íŠ¸ ë°”ì¸ë”© (ì…ë ¥ ì¦‰ì‹œ ì‹¤ì‹œê°„ ê°•ì¡° í•¨ìˆ˜ í˜¸ì¶œ)
            searchInput.addEventListener('keyup', highlightNodes); 

            // ğŸ’¡ í´ë¦¬ì–´ ë¡œì§ì„ í•¨ìˆ˜ë¡œ ë¶„ë¦¬í•˜ì—¬ ESC í‚¤ì™€ Clear ë²„íŠ¼ì´ í•¨ê»˜ ì‚¬ìš©í•˜ë„ë¡ í•©ë‹ˆë‹¤.
            function clearSearchAndUnhighlight() {
                searchInput.value = ''; // ê²€ìƒ‰ì°½ ë‚´ìš© í´ë¦¬ì–´
                // ê²€ìƒ‰ì°½ì´ ë¹„ì—ˆì„ ë•Œ í•˜ì´ë¼ì´íŠ¸ë¥¼ í•´ì œí•˜ëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
                // highlightNodes()ëŠ” ë¹ˆ ê²€ìƒ‰ì–´ë¡œ í˜¸ì¶œë  ê²½ìš° ëª¨ë“  ë…¸ë“œì˜ ê°•ì¡°ë¥¼ í•´ì œí•©ë‹ˆë‹¤.
                highlightNodes(); 
            }

            // 1. ESC í‚¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ (ê¸°ì¡´ ë¡œì§ ìœ ì§€)
            searchInput.addEventListener('keydown', function(event) {
                if (event.key === 'Escape' || event.keyCode === 27) {
                    event.preventDefault(); 
                    clearSearchAndUnhighlight(); // í†µí•© í•¨ìˆ˜ í˜¸ì¶œ
                }
            });

            // 2. Clear ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ (ìƒˆë¡œ ì¶”ê°€)
            clearButton.addEventListener('click', function() {
                clearSearchAndUnhighlight(); // í†µí•© í•¨ìˆ˜ í˜¸ì¶œ
                searchInput.focus(); // ì‚¬ìš© í¸ì˜ë¥¼ ìœ„í•´ í´ë¦¬ì–´ í›„ ê²€ìƒ‰ì°½ì— í¬ì»¤ìŠ¤ë¥¼ ë‹¤ì‹œ ì¤ë‹ˆë‹¤.
            });
            // --- [JS ë¡œì§ í†µí•© ì¢…ë£Œ] ---
        }

        // êµ¬ê¸€ ì‹œíŠ¸ APIì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ GoJS ëª¨ë¸ì„ êµ¬ì„±í•˜ëŠ” í•¨ìˆ˜ (ì§„ë‹¨ ë³´ê°• ë¡œì§ ì ìš©)
        function fetchDataAndBuildChart(diagram) {
            fetch(API_URL)
                .then(response => {
                    if (!response.ok) {
                        // HTTP ì‘ë‹µ ì½”ë“œê°€ 200 OKê°€ ì•„ë‹ ê²½ìš°
                        throw new Error("API í˜¸ì¶œ ì‹¤íŒ¨: " + response.statusText);
                    }
                    return response.json();
                })
                .then(data => {
                    if (!Array.isArray(data)) {
                        throw new Error("API ì‘ë‹µ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. (ë°°ì—´ì´ ì•„ë‹˜)");
                    }
                    
                    // **âœ… ì§„ë‹¨ ë³´ê°•: ë°ì´í„° ë°°ì—´ì´ ë¹„ì–´ìˆëŠ” ê²½ìš° ê²½ê³  ì¶œë ¥**
                    if (data.length === 0) {
                        document.getElementById("orgChartDiv").innerHTML = `<p style="color: orange; padding: 20px;">**ê²½ê³ :** API í†µì‹ ì€ ì„±ê³µí–ˆìœ¼ë‚˜, Google Sheetsì— ë…¸ë“œë¥¼ ìƒì„±í•  **ë°ì´í„° í–‰ì´ í•˜ë‚˜ë„ ì—†ìŠµë‹ˆë‹¤.**</p>`;
                        return;
                    }

                    // JSON ë°ì´í„°ë¥¼ GoJS ëª¨ë¸ í˜•ì‹ìœ¼ë¡œ ë³€í™˜ (isHighlighted ê¸°ë³¸ê°’ ì¶”ê°€)
                    const nodeDataArray = data.map(item => ({
                        key: item['ë³¸ì¸_ì§€ê°‘_ì£¼ì†Œ'], 
                        parent: item['ìƒìœ„_ë…¸ë“œ_ì§€ê°‘_ì£¼ì†Œ'], 
                        ìœ ì €_ì´ë¦„: item['ìœ ì €_ì´ë¦„'] || item['ìœ ì €_ID'],
                        ìœ ì €_ID: item['ìœ ì €_ID'],
                        ì—°ë½ì²˜: item['ì—°ë½ì²˜'],
                        ë³¸ì¸_ì§€ê°‘_ì£¼ì†Œ: item['ë³¸ì¸_ì§€ê°‘_ì£¼ì†Œ'],
                        ì§ì†_í•˜ìœ„_ìˆ˜: item['ì§ì†_í•˜ìœ„_ìˆ˜'],
                        ì´_í•˜ìœ„_ìˆ˜: item['ì´_í•˜ìœ„_ìˆ˜'],
                        isRoot: item['ìƒìœ„_ë…¸ë“œ_ì§€ê°‘_ì£¼ì†Œ'] === "", 
                        isHighlighted: false // ì‹¤ì‹œê°„ ê²€ìƒ‰ ê°•ì¡°ë¥¼ ìœ„í•œ ì†ì„±
                    })).filter(item => item.key); 

                    // ë‹¤ì´ì–´ê·¸ë¨ ëª¨ë¸ ì—…ë°ì´íŠ¸
                    diagram.model = $(go.TreeModel, { nodeDataArray: nodeDataArray });
                })
                .catch(error => {
                    // **âŒ í†µì‹  ì‹¤íŒ¨ ë˜ëŠ” ì‘ë‹µ ë°ì´í„° êµ¬ì¡° ì˜¤ë¥˜ ì‹œ ë¹¨ê°„ìƒ‰ ì˜¤ë¥˜ ë©”ì‹œì§€ ì¶œë ¥**
                    console.error("ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
                    document.getElementById("orgChartDiv").innerHTML = `<p style="color: red; padding: 20px;">**ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:** API URL(${API_URL})ì„ í™•ì¸í•˜ê±°ë‚˜, Apps Scriptê°€ "ëª¨ë“  ì‚¬ìš©ì"ì—ê²Œ ê³µê°œë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. ${error.message}</p>`;
                });
        }

        // ë…¸ë“œ í´ë¦­ ì‹œ ìš°ì¸¡ ìƒë‹¨ì— ìƒì„¸ ì •ë³´ë¥¼ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
        function showNodeDetails(data) {
            const detailsDiv = document.getElementById("selectedNodeInfo");
            detailsDiv.innerHTML = `
                <h3>${data.ìœ ì €_ì´ë¦„} (${data.ìœ ì €_ID})</h3>
                <p><strong>ë³¸ì¸ ì§€ê°‘:</strong> ${data.ë³¸ì¸_ì§€ê°‘_ì£¼ì†Œ}</p>
                <p><strong>ìƒìœ„ ì§€ê°‘:</strong> ${data.parent || 'ì—†ìŒ (ë£¨íŠ¸)'}</p>
                <p><strong>ì—°ë½ì²˜:</strong> ${data.ì—°ë½ì²˜}</p>
                <p><strong>ì§ì† í•˜ìœ„:</strong> ${data.ì§ì†_í•˜ìœ„_ìˆ˜}ëª…, <strong>ì´ í•˜ìœ„ ì¡°ì§:</strong> ${data.ì´_í•˜ìœ„_ìˆ˜}ëª…</p>
            `;
        }
        
        // ì‹¤ì‹œê°„ ê²€ìƒ‰ ê°•ì¡° í•¨ìˆ˜ (ì…ë ¥ ì¦‰ì‹œ ë…¸ë“œ ë°°ê²½ìƒ‰ ë³€ê²½)
        function highlightNodes() {
            if (!myDiagram || !myDiagram.model) return;
            
            const searchInput = document.getElementById('searchInput');
            const searchText = searchInput.value.toLowerCase().trim();
            const model = myDiagram.model;
            let firstFoundNode = null; 

            // íŠ¸ëœì­ì…˜ ì‹œì‘: ì—¬ëŸ¬ ë°ì´í„° ë³€ê²½ ì‘ì—…ì„ í•˜ë‚˜ë¡œ ë¬¶ì–´ ì„±ëŠ¥ ìµœì í™”
            myDiagram.startTransaction("highlight search results");

            model.nodeDataArray.forEach(data => {
                const name = (data.ìœ ì €_ì´ë¦„ || '').toLowerCase();
                const userId = (data.ìœ ì €_ID || '').toLowerCase();
                const contact = (data.ì—°ë½ì²˜ || '').toLowerCase();
                const wallet = (data.ë³¸ì¸_ì§€ê°‘_ì£¼ì†Œ || '').toLowerCase();
                
                let matches = false;

                if (searchText.length > 0) {
                    // ì´ë¦„, ID, ì—°ë½ì²˜ì— í¬í•¨ë˜ëŠ”ì§€ í™•ì¸ (ë¶€ë¶„ ì¼ì¹˜)
                    if (name.includes(searchText) || userId.includes(searchText) || contact.includes(searchText)) {
                        matches = true;
                    }
                    // ì§€ê°‘ ì£¼ì†Œì˜ ë 4ìë¦¬ê°€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸
                    // ì´ ë¡œì§ì€ ì£¼ì„ ì²˜ë¦¬í–ˆìœ¼ë¯€ë¡œ, ì›í•˜ëŠ” ê²½ìš° ë‹¤ì‹œ ì‚´ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    /* if (!matches && searchText.length >= 4 && wallet.includes(searchText)) {
                        matches = true;
                    }
                    */
                   // í˜„ì¬ëŠ” ì „ì²´ ì§€ê°‘ ì£¼ì†Œì— í¬í•¨ë˜ëŠ”ì§€ í™•ì¸ (ë” ê´‘ë²”ìœ„í•œ ê²€ìƒ‰)
                   if (!matches && wallet.includes(searchText)) {
                        matches = true;
                   }
                }
                
                // ì¼ì¹˜í•˜ëŠ” ê²½ìš° isHighlightedë¥¼ trueë¡œ ì„¤ì •í•˜ê³ , ì•„ë‹ ê²½ìš° falseë¡œ ì„¤ì •
                if (data.isHighlighted !== matches) {
                    // ë°ì´í„° ì†ì„±ì„ ë³€ê²½í•˜ì—¬ GoJSì˜ Bindingì´ ë…¸ë“œ ìƒ‰ìƒì„ ì¦‰ì‹œ ì—…ë°ì´íŠ¸í•˜ë„ë¡ ìœ ë„
                    model.setDataProperty(data, "isHighlighted", matches);
                }
                
                // ê²€ìƒ‰ ê²°ê³¼ê°€ ìˆìœ¼ë©´ ì²« ë²ˆì§¸ ë…¸ë“œ ì €ì¥
                if (matches && !firstFoundNode) {
                    firstFoundNode = myDiagram.findNodeForKey(data.key);
                }
            });
            
            // íŠ¸ëœì­ì…˜ ì¢…ë£Œ
            myDiagram.commitTransaction("highlight search results");
            
            // ê²€ìƒ‰ ê²°ê³¼ê°€ í•˜ë‚˜ë¼ë„ ìˆëŠ” ê²½ìš°, ì²« ë²ˆì§¸ ë…¸ë“œë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì´ë™ ë° ì •ë³´ í‘œì‹œ
            if (firstFoundNode) {
                myDiagram.centerPart(firstFoundNode);
                firstFoundNode.isSelected = true; // ë…¸ë“œ ì„ íƒ ìƒíƒœ ìœ ì§€
                showNodeDetails(firstFoundNode.data); // ìƒì„¸ ì •ë³´ í‘œì‹œ
            } else {
                // ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ê±°ë‚˜ ê²€ìƒ‰ì–´ë¥¼ ì§€ì› ì„ ë•Œ, ëª¨ë“  ì„ íƒ ìƒíƒœ í•´ì œ
                myDiagram.clearSelection();
                document.getElementById("selectedNodeInfo").innerHTML = "ë…¸ë“œë¥¼ ì„ íƒí•˜ë©´ ìƒì„¸ ì •ë³´ê°€ í‘œì‹œë©ë‹ˆë‹¤.";
            }
        }

        // ë…¸ë“œ ì„ íƒ ì‹œ í‘œì‹œë˜ëŠ” í…Œë‘ë¦¬ ë””ìì¸ ì •ì˜ (Adornment)
        const nodeSelectionAdornmentTemplate =
            $(go.Adornment, "Auto",
                $(go.Shape, "RoundedRectangle",
                    { fill: null, stroke: "dodgerblue", strokeWidth: 3 }),
                $(go.Placeholder)
            );

        // HTML ë¬¸ì„œ ë¡œë“œê°€ ì™„ë£Œëœ í›„ init í•¨ìˆ˜ ì‹¤í–‰
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
